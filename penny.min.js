!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.penny=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var USDollarSignParser=require("./parsers/US/USDollarSignParser").Parser,JPYenSignParser=require("./parsers/JP/JPYenSignParser").Parser,JPYenSignWithCommaParser=require("./parsers/JP/JPYenSignWithCommaParser").Parser,GeneralNumberParser=require("./parsers/GeneralNumberParser").Parser,MergeRangeRefiner=require("./refiners/MergeRangeRefiner").Refiner,OverlapRemovalRefiner=require("./refiners/OverlapRemovalRefiner").Refiner;exports.strictOptions=function(){return{parsers:[new USDollarSignParser,new JPYenSignParser],refiners:[new MergeRangeRefiner,new OverlapRemovalRefiner]}},exports.generalOptions=function(){var e=exports.strictOptions();return e.parsers.push(new GeneralNumberParser),e};
},{"./parsers/GeneralNumberParser":2,"./parsers/JP/JPYenSignParser":3,"./parsers/JP/JPYenSignWithCommaParser":4,"./parsers/US/USDollarSignParser":6,"./refiners/MergeRangeRefiner":9,"./refiners/OverlapRemovalRefiner":10}],2:[function(require,module,exports){
var Parser=require("./parser").Parser,ParsedResult=require("../result").ParsedResult,PATTERN=/(\d{1,3}(,\d{3})*(\.\d*)?)/;exports.Parser=function(){Parser.call(this),this.pattern=function(){return PATTERN},this.extract=function(r,e){var t=e[1];return t=t.replace(",",""),t=parseFloat(t),new ParsedResult({text:e[0],index:e.index,number:t,tag:"GeneralNumberParser"})}};
},{"../result":12,"./parser":7}],3:[function(require,module,exports){
var util=require("./util"),Parser=require("../parser").Parser,ParsedResult=require("../../result").ParsedResult,PATTERN=/([０-９\d]+)(万|千|億)?円/;exports.Parser=function(){Parser.call(this),this.pattern=function(){return PATTERN},this.extract=function(e,r){var t=r[1];return t=util.zenkakuToHankaku(t),t=parseFloat(t),"万"==r[2]&&(t*=1e4),"千"==r[2]&&(t*=1e3),"億"==r[2]&&(t*=1e8),new ParsedResult({text:r[0],index:r.index,number:t,currency:"JP",tag:"JPYenSignParser"})}};
},{"../../result":12,"../parser":7,"./util":5}],4:[function(require,module,exports){
var util=require("./util"),Parser=require("../parser").Parser,ParsedResult=require("../../result").ParsedResult,PATTERN=/([1-9１-９]{1,3}(,[０-９\d]{3})*(\.[０-９\d]*)?)(万|千|億)?円/;exports.Parser=function(){Parser.call(this),this.pattern=function(){return PATTERN},this.extract=function(e,r){var t=r[1];return t=util.zenkakuToHankaku(t),t=t.replace.replace(",",""),t=parseFloat(t),"万"==r[2]&&(t*=1e4),"千"==r[2]&&(t*=1e3),"億"==r[2]&&(t*=1e8),new ParsedResult({text:r[0],index:r.index,number:t,currency:"JP",tag:"JPYenSignWithCommaParser"})}};
},{"../../result":12,"../parser":7,"./util":5}],5:[function(require,module,exports){
var hankaku="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ ",zenkaku="１２３４５６７８９０ａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚＡＢＣＤＥＦＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺ　";exports.zenkakuToHankaku=function(a){for(var e=0,k=zenkaku.length;k>e;e++)a=a.replace(new RegExp(zenkaku[e],"gm"),hankaku[e]);return a.replace(/^\s+|\s+$/g,"")},exports.hankakuToZenkaku=function(a){for(var e=0,k=hankaku.length;k>e;e++)a=a.replace(new RegExp(hankaku[e],"gm"),zenkaku[e]);return a.replace(/^\s+|\s+$/g,"")};
},{}],6:[function(require,module,exports){
var Parser=require("../parser").Parser,ParsedResult=require("../../result").ParsedResult,PATTERN=/\$\s*(\d{1,3}(,\d{3})*(\.\d*)?)/;exports.Parser=function(){Parser.call(this),this.pattern=function(){return PATTERN},this.extract=function(r,e){var t=e[1];return t=t.replace(",",""),t=parseFloat(t),new ParsedResult({text:e[0],index:e.index,number:t,currency:"US",tag:"USDollarSignParser"})}};
},{"../../result":12,"../parser":7}],7:[function(require,module,exports){
function Parser(){this.pattern=function(){return/./i},this.extract=function(){return null},this.execute=function(e,t){for(var r=[],n=this.pattern(),i=e,s=n.exec(i);s;){s.index+=e.length-i.length;var u=this.extract(e,s,t);u?(i=e.substring(u.index+u.text.length),r.push(u)):i=e.substring(s.index+1),s=n.exec(i)}return this.refiners&&this.refiners.forEach(function(){r=refiner.refine(r,e,options)}),r}}exports.Parser=Parser;
},{}],8:[function(require,module,exports){
var Penny=function(e){this.options=e,this.parsers=new Object(e.parsers),this.refiners=new Object(e.refiners)};Penny.prototype.parse=function(e,r){r=r||{};var s=[];return this.parsers.forEach(function(n){var t=n.execute(e,r);s=s.concat(t)}),this.refiners.forEach(function(n){s=n.refine(e,s,r)}),s},exports.Penny=Penny,exports.Parser=require("./parsers/parser").Parser,exports.Refiner=require("./refiners/refiner").Filter,exports.Filter=require("./refiners/refiner").Filter,exports.ParsedResult=require("./result").ParsedResult,exports.options=require("./options"),exports.strict=new Penny(exports.options.strictOptions()),exports.general=new Penny(exports.options.generalOptions()),exports.parse=function(){return exports.general.parse.apply(exports.general,arguments)};
},{"./options":1,"./parsers/parser":7,"./refiners/refiner":11,"./result":12}],9:[function(require,module,exports){
function isAbleToMerge(e,n,r){var t=e.substring(n.index+n.text.length,r.index);return t.match(PATTERN)}function mergeResult(e,n,r){n=n.clone(),n.numberMax=Math.max(r.number,n.number),n.numberMin=Math.min(r.number,n.number),n.number=n.numberMin;var t=Math.min(n.index,r.index),i=Math.max(n.index+n.text.length,r.index+r.text.length);n.index=t,n.text=e.substring(t,i);for(var u in r.tags)n.tags[u]=r.tags[u];return n.tags.MergeRangeResult=!0,n}var Refiner=require("./refiner").Refiner,PATTERN=new RegExp("^\\s*(and|to|-|~|ー|〜)?\\s*$");exports.Refiner=function(){Refiner.call(this),this.refine=function(e,n){if(n.length<2)return n;for(var r=[],t=null,i=null,u=1;u<n.length;u++)t=n[u],i=n[u-1],i.numberMin||t.numberMax||!isAbleToMerge(e,i,t)||(i=mergeResult(e,i,t),t=null,u+=1),r.push(i);return null!=t&&r.push(t),r}};
},{"./refiner":11}],10:[function(require,module,exports){
var Refiner=require("./refiner").Refiner;exports.Refiner=function(){Refiner.call(this),this.refine=function(e,n){if(n.length<2)return n;for(var r=[],t=n[0],i=1;i<n.length;i++){var f=n[i];f.index<t.index+t.text.length?f.text.length>t.text.length&&(t=f):(r.push(t),t=f)}return null!=t&&r.push(t),r}};
},{"./refiner":11}],11:[function(require,module,exports){
exports.Refiner=function(){this.refine=function(i,n){return n}},exports.Filter=function(){Refiner.call(this),this.isValid=function(){return!0},this.refine=function(i,n){for(var t=[],e=0;e=n.length;e++)this.isValid(n[e])&&t.push(n[e]);return t}};
},{}],12:[function(require,module,exports){
function ParsedResult(t){t=t||{},this.index=t.index,this.text=t.text,this.number=t.number,this.numberMin=t.numberMin,this.numberMax=t.numberMax,this.currency=t.currency,this.tags=t.tags||{},t.tag&&(this.tags[t.tag]=!0)}ParsedResult.prototype.clone=function(){return new ParsedResult(this)},exports.ParsedResult=ParsedResult;
},{}]},{},[8])(8)
});


//# sourceMappingURL=bundle.map